function _array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _array_with_holes(e){if(Array.isArray(e))return e}function _array_without_holes(e){if(Array.isArray(e))return _array_like_to_array(e)}function asyncGeneratorStep(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function _async_to_generator(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){asyncGeneratorStep(a,r,o,i,s,"next",e)}function s(e){asyncGeneratorStep(a,r,o,i,s,"throw",e)}i(void 0)}))}}function _define_property(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _iterable_to_array(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _iterable_to_array_limit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_define_property(e,t,n[t])}))}return e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _object_spread_props(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function _sliced_to_array(e,t){return _array_with_holes(e)||_iterable_to_array_limit(e,t)||_unsupported_iterable_to_array(e,t)||_non_iterable_rest()}function _to_consumable_array(e){return _array_without_holes(e)||_iterable_to_array(e)||_unsupported_iterable_to_array(e)||_non_iterable_spread()}function _unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return _array_like_to_array(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_array_like_to_array(e,t):void 0}}function _ts_generator(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{32066:function(e,t,n){"use strict";n.d(t,{$J:function(){return p},$f:function(){return u},A1:function(){return C},N5:function(){return v},Of:function(){return b},Ru:function(){return h},TB:function(){return l},Vw:function(){return m},Z6:function(){return c},d0:function(){return y},ie:function(){return j},kT:function(){return g},ld:function(){return w},mu:function(){return s},qM:function(){return x},tz:function(){return f},vu:function(){return i},wJ:function(){return _},yq:function(){return d}});var r=n(5164),o=n(79614),a=n(59808);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.Hn.get("/api_".concat((0,a.a)(t,"v2"),"/story_data/").concat(e),n)}function s(e,t){return o.Hn.get("/api_".concat((0,a.a)(t),"/stories/").concat(e))}function c(e){var t=e.data,n=e.newVersion;return o.Hn.post("/api_".concat((0,a.a)(n),"/stories/add"),t)}function l(e,t){return o.Hn.get("/api_".concat((0,a.a)(t),"/my-stories"),_object_spread({},e))}function u(e,t){return o.Hn.post("/api_".concat((0,a.a)(t,"v2"),"/stories"),(0,r.snakize)({userIds:e}))}function d(e,t){return o.Hn.get("/api_".concat((0,a.a)(t),"/hashtag"),_object_spread({},e))}function f(e){var t=e.vendors,n=e.count,r=e.newVersion;return o.Hn.post("/api_".concat((0,a.a)(r,"v2"),"/user-feed"),{count:n,vendors:t})}function _(e,t){var n=e.count,i=e.identifier,s=e.lastRank,c=e.timeout,l=(0,r.snakize)({count:n,lastRank:s,identifier:i});return o.Hn.get("/api_".concat((0,a.a)(t),"/highlight/read-user-highlights"),_object_spread({params:l},c?{timeout:c}:{}))}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.Hn.post("/api_v1.0/stories/".concat(e,"/seen"),t)}function g(e){return o.Hn.post("/api_v1.0/stories/".concat(e,"/like"))}function m(e){return o.Hn.delete("/api_v1.0/stories/".concat(e,"/like"))}function p(e){return o.Hn.delete("/api_v1.0/stories/".concat(e))}function h(e){return o.Hn.get("/follow-service/has-followed-v2/".concat(e))}function b(e){return o.Hn.post("/follow-service/follow",(0,r.snakize)(e))}function y(e){return o.Hn.post("/follow-service/followers-list",(0,r.snakize)(e))}function w(e){return o.Hn.post("/follow-service/followings-list",(0,r.snakize)(e))}function x(e){return o.Hn.post("/api_v1.0/blocked-users",{target_user_id:e})}function j(e){return o.Hn.delete("/api_v1.0/blocked-users/".concat(e))}function C(e,t,n){var r=n.signal;return o.Hn.get("/api_v1.0/hashtag/autocomplete",{signal:r,params:{substring:e,count:t}})}},96815:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(79614);function o(e,t){return r.He.post("/api_v1.0/store-file",e,{timeout:0,processData:!1,contentType:!1,signal:null==t?void 0:t.signal})}},83642:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(32930),o=n(65074),a=n.n(o),i=n(81433),s=n.n(i);function c(e){var t=e.fetch;return(0,r.jsx)(s(),{display:"flex",alignItems:"center",justifyContent:"center",children:(0,r.jsx)(a(),{onClick:function(){return null==t?void 0:t()},children:"تلاش مجدد "})})}},16660:function(e,t,n){"use strict";n.d(t,{Z:function(){return U}});var r=n(32930),o=n(79862),a=n.n(o),i=n(40877),s=n(27434),c=n(50874),l=n.n(c),u=n(71335),d=n.n(u),f=n(84581),_=n(88592),v=n(88107),g=n(61262);function m(e){var t=e.icon,n=e.title,o=e.count,a=e.active,s=e.onClick,c=e.eventUrl,l=e.hasPoint,u=e.path,m=void 0===u?"":u,p=e.activeIcon,h=e.isNeedLogin,b=e.isShowCategory,y=(0,v.Z)(),w=(0,g.B)().authForm.toggleModal,x=(0,_.M_)(["orderCount","typeOfUser","isLoggedIn","isLoadingCurrentUser"]),j=x.orderCount,C=x.typeOfUser,k=x.isLoggedIn,S=x.isLoadingCurrentUser;return(0,r.jsxs)("div",{className:(0,i.Z)(d()["bottom-navigation-item"],_define_property({},d()["bottom-navigation-item--active"],a)),onClick:function(e){if(c&&(0,f.s)("bottomNavigationClick",{typeOfUser:C,orderCount:j,tabName:n,urlName:c}),!h||k){null==s||s(e);var t=y.pathname===m?null:m;t&&(b?setTimeout((function(){y.push(t)}),300):y.push(t))}else S||w()},children:[(0,r.jsx)("div",{className:(0,i.Z)(d()["bottom-navigation-item__icon"],_define_property({},d()["bottom-navigation-item__icon--has-point"],l)),children:(0,r.jsx)("img",{className:d()["bottom-navigation-item__icon-svg"],src:a?p:t,width:24,height:24,alt:n})}),(0,r.jsx)("span",{className:d()["bottom-navigation-item__title"],children:n}),!!o&&!a&&(0,r.jsx)("span",{className:d()["bottom-navigation-item__count"],children:o})]})}m.propTypes={active:l().bool,path:l().string,count:l().number,hasPoint:l().bool,eventUrl:l().string,isShowCategory:l().bool,icon:l().string.isRequired,title:l().string.isRequired,activeIcon:l().string.isRequired};var p=(0,s.memo)(m),h=n(36350),b=n(81918),y=n(45835),w=n(36839),x=n(60802),j="https://basalam.com/_next/static/media/chat.afc5cfa6.svg",C="https://basalam.com/_next/static/media/home.09ac2b44.svg",k="https://basalam.com/_next/static/media/cart.ad412bf7.svg",S="https://basalam.com/_next/static/media/account.d0596f28.svg",P="https://basalam.com/_next/static/media/category.31079f85.svg",I="https://basalam.com/_next/static/media/chat-fill.690b3c78.svg",O="https://basalam.com/_next/static/media/home-fill.f41cda05.svg",N="https://basalam.com/_next/static/media/cart-fill.e687a7a1.svg",M="https://basalam.com/_next/static/media/account-fill.3582af62.svg",E="https://basalam.com/_next/static/media/category-fill.dbb5dccc.svg",U=(0,s.memo)((function(e){var t=e.top,n=e.active,o=(0,v.Z)(),i=(0,h.useEmitter)().emitEvent,c=(0,y.b)().isWebview,l=_sliced_to_array((0,s.useState)(n),2),u=l[0],d=l[1],g=(0,x.l)().getFeatureValue,m=(0,b.E)().itemCount,U=(0,_.M_)(["bnpl","currentUser","typeOfUser","orderCount"]),H=U.bnpl,A=U.currentUser,T=U.typeOfUser,L=U.orderCount,F=(0,w.dalanMapGetters)(["unseenMessages"]).unseenMessages,Z=(0,s.useMemo)((function(){var e,t;return(null!==(e=null==F?void 0:F.chat)&&void 0!==e?e:0)+(null!==(t=null==F?void 0:F.notification)&&void 0!==t?t:0)}),[null==F?void 0:F.chat,null==F?void 0:F.notification]),z=_sliced_to_array((0,s.useState)(!1),2),q=z[0],R=z[1],G=!(!(null==H?void 0:H.activated)||!(null==H?void 0:H.overdueDebt)),D=(null==H?void 0:H.isActivationAvailable)&&!(null==H?void 0:H.hasActiveCredits),V=(0,s.useMemo)((function(){var e;return null===(e=g("chat_config"))||void 0===e?void 0:e.allow_not_login}),[g]),K=(0,s.useCallback)((function(){d("HOME"),q&&(i("toggle-category-mobile",{isVisible:!1}),R(!1))}),[q]),B=(0,s.useCallback)((function(){d("CATEGORY"),q||(i("toggle-category-mobile",{isVisible:!0}),R(!0))}),[q]),Q=(0,s.useCallback)((function(){d("CART"),q&&(i("toggle-category-mobile",{isVisible:!1}),R(!1))}),[q]),J=(0,s.useCallback)((function(){d("CHAT"),q&&(i("toggle-category-mobile",{isVisible:!1}),R(!1)),(0,f.s)("chatListView",{typeOfUser:T,orderCount:L,unreadChatListItemCount:null==A?void 0:A.unseenMessagesCount})}),[q]),W=(0,s.useCallback)((function(){d("ACCOUNT"),q&&(i("toggle-category-mobile",{isVisible:!1}),R(!1))}),[q]);return(0,s.useEffect)((function(){o.prefetch("/"),o.prefetch("/cart"),o.prefetch("/account"),o.prefetch("/account/chats")}),[o]),(0,r.jsxs)("div",{className:a()["bottom-navigation"],id:"bottom-navigation",children:[n===u&&t,!c&&(0,r.jsxs)("nav",{className:a()["bottom-navigation__nav"],children:[(0,r.jsx)(p,{path:"/",title:"خانه",eventUrl:"home",icon:C,activeIcon:O,isShowCategory:q,active:"HOME"===u&&!q,onClick:K}),(0,r.jsx)(p,{title:"دسته‌بندی‌ها",icon:P,isShowCategory:q,activeIcon:E,active:q||"CATEGORY"===u,onClick:B}),(0,r.jsx)(p,{path:"/cart",eventUrl:"cart",title:"سبد خرید",icon:k,count:m,activeIcon:N,isShowCategory:q,active:"CART"===u&&!q,onClick:Q}),(0,r.jsx)(p,{title:"گفت‌وگو‌ها",eventUrl:"chat",count:Z,icon:j,path:"/account/chats",activeIcon:I,isShowCategory:q,isNeedLogin:!V,active:"CHAT"===u&&!q,onClick:J}),(0,r.jsx)(p,{isNeedLogin:!0,path:"/account",eventUrl:"profile",title:"حساب کاربری",icon:S,isShowCategory:q,activeIcon:M,hasPoint:G||D,active:"ACCOUNT"===u&&!q,onClick:W})]})]})}))},76088:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(32930),o=n(27434),a=n(65074),i=n.n(a),s=n(84581),c=n(88592),l=n(85945),u=n(61262),d=n(17902),f=n(48228),_=n(32066),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,d.aM)(["user-following-status",e],(function(){return(0,_.Ru)(e)}),_object_spread({},t))},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,f.D)(["follow-unfollow-user"],(function(){return(0,_.Of)(e)}),t)};function m(e){var t=e.buttonProps,n=e.targetUserId,a=e.eventData,d=void 0===a?null:a,f=e.targetUserHashId,_=(0,c.M_)(["isLoggedIn"]).isLoggedIn,m=_sliced_to_array((0,o.useState)(!1),2),p=m[0],h=m[1],b=(0,l.NL)(),y=(0,u.B)().authForm.toggleModal,w=v(n,{enabled:_&&!!n}),x=w.data,j=w.isLoading,C=g({enabled:!!f,targetUserHashid:f,action:p?"unfollow":"follow"}),k=C.mutate,S=C.isLoading;return(0,o.useEffect)((function(){h(null==x?void 0:x.hasFollowed)}),[null==x?void 0:x.hasFollowed]),(0,r.jsx)(i(),_object_spread_props(_object_spread({loading:(j||S)&&_,color:p?"secondary":"primary",variant:p?"outline":"fill",label:p?"دنبال کرده‌اید":"دنبال کنید"},t),{onClick:function(e){e.stopPropagation(),_?(k(),h((function(e){return!e})),setTimeout((function(){b.invalidateQueries(["user-following-status",n],{exact:!0})}),200),d&&"object"==typeof d&&(0,s.s)("followClicked",{name:d.name,isUnfollow:!p,vendorId:d.vendorId,vendorName:d.vendorName,targetUserId:d.targetUserId,followSource:d.followSource,vendorIdentifier:d.vendorIdentifier})):y()}}))}},84308:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ce}});var r=n(58271),o=n(21306),a=n(5164),i=n(32930),s=n(41146),c=n.n(s),l=n(40877),u=n(2389),d=n.n(u),f=n(4542),_=n.n(f),v=n(58395),g=n.n(v),m=n(17902),p=n(88592),h=n(26491),b=n(52233),y=n.n(b),w=n(27434),x=n(50874),j=n.n(x),C=n(2134),k=n.n(C),S=n(88107);function P(e){var t=e.preloadImage,n=(0,S.Z)(),r=k()().publicRuntimeConfig,o="باسلام؛ بازار بی‌مرز",a=(0,w.useMemo)((function(){var e,t,r,o;return null===(o=n.asPath)||void 0===o||null===(r=o.split("?"))||void 0===r||null===(t=r[0])||void 0===t||null===(e=t.split("#"))||void 0===e?void 0:e[0]}),[n.asPath]),s=r.baseUrl+a,c="«باسلام» یک بازار بی‌مرز برای خرید و فروش است. در باسلام می‌توانید هر چیزی را که به دنبالش می‌گردید در میان دریای متنوعی از محصولات پیدا کنید.";return(0,i.jsxs)(y(),{children:[(0,i.jsx)("title",{children:o}),(0,i.jsx)("meta",{property:"og:title",content:o}),(0,i.jsx)("meta",{property:"og:url",content:s}),(0,i.jsx)("meta",{name:"description",content:"«باسلام» یک بازار بی‌مرز برای خرید و فروش محصولات مختلف با کیفیت و قیمت‌های متفاوت است. در باسلام می‌توانید هر چیزی را که به دنبالش می‌گردید در میان دریای متنوعی از محصولات پیدا کنید. محصولات خاصی که در فروشگاه‌های اینترنتی کمتر پیدا می‌شود. این محصولات را می‌توانید مستقیما از خود تولیدکننده‌ها یا واسطه‌ها بخرید. همچنین، می‌توانید غرفه خود را راه بیاندازید و محصولاتتان را بفروشید. به باسلام بیایید، بین هزاران غرفه‌ی آنلاین بچرخید و درباره‌ی تجربه‌های متنوع خریدوفروش گپ بزنید."}),(0,i.jsx)("meta",{property:"og:description",content:c}),(0,i.jsx)("meta",{property:"og:site_name",content:"باسلام؛ بازار بی‌مرز"}),(0,i.jsx)("link",{rel:"canonical",href:s}),t&&(0,i.jsx)("link",{rel:"preload",as:"image",href:t,fetchpriority:"high"}),"/"===a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("meta",{name:"twitter:card",content:"summary"}),(0,i.jsx)("meta",{name:"twitter:site",content:"@basalam_bazaar"}),(0,i.jsx)("meta",{name:"twitter:title",content:o}),(0,i.jsx)("meta",{name:"twitter:description",content:c})]})]})}P.propTypes={preloadImage:j().string};var I=n(16660),O=n(39145),N=n.n(O),M=n(45835),E=n(59775),U=n(3087),H=n(60802),A=n(83642),T=n(81433),L=n.n(T),F=n(70437),Z=n.n(F),z=n(177),q=n.n(z);function R(){var e=(0,M.b)().ua.isPc;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L(),{my:16,display:"flex",alignItems:"center",justifyContent:"center",children:(0,i.jsx)(Z(),{width:"100%",height:500})}),(0,i.jsx)(q(),{children:(0,i.jsx)(L(),{my:16,display:"flex",children:(0,a.range)(e?10:5).map((function(e,t){return(0,i.jsx)("div",{style:{flexGrow:1},children:(0,i.jsx)(Z(),{width:120,height:85})},t)}))})})]})}var G=d()((function(){return n.e(5601).then(n.bind(n,15601))}),{loadableGenerated:{webpack:function(){return[15601]}},ssr:!1}),D=d()((function(){return n.e(560).then(n.bind(n,10560))}),{loadableGenerated:{webpack:function(){return[10560]}},ssr:!0}),V=d()((function(){return n.e(2931).then(n.bind(n,12931))}),{loadableGenerated:{webpack:function(){return[12931]}},ssr:!0}),K=(0,h.Z)({on:["visible"]})(G);function B(e){return e.map((function(e){return _object_spread_props(_object_spread({},e),{result:[e.result[0].metadata]})}))}function Q(){var e=(0,H.l)().getFeatureValue,t=(0,M.b)().ua.isPc,n=_sliced_to_array((0,w.useState)(!1),2),r=n[0],o=n[1],a=(0,p.M_)(["currentUser","isLoggedIn"]),s=a.currentUser,u=a.isLoggedIn,d=e("home_page",{}),f=d.explore,v=void 0===f||f,h=d.discovery,b=void 0===h||h,y=(0,m.NS)({enabled:v,queryKey:["first-page-discovery"],getNextPageParam:function(e){var t;return 12===e.items.length?null===(t=e.meta)||void 0===t?void 0:t.lastRank:void 0},queryFn:function(e){var t=e.pageParam,n=void 0===t?0:t;return(0,U._I)({userId:null==s?void 0:s.id,config:{params:{size:12,item_size:12,tab:"home_ios",lastRank:n}}})}}),x=y.data,j=y.isError,C=y.isLoading,k=y.refetch,S=y.hasNextPage,O=y.fetchNextPage,T=y.isFetchingNextPage,L=(null==x?void 0:x.pages.length)>0&&!S&&u&&b,F=(0,w.useMemo)((function(){var e;return(null==x||null===(e=x.pages)||void 0===e?void 0:e.reduce((function(e,t){return _to_consumable_array(e).concat(_to_consumable_array(t.items||[]))}),[]))||[]}),[null==x?void 0:x.pages]),Z=(0,w.useMemo)((function(){var e,n,r,o,a,i;return"billboard_image"===(null==F||null===(e=F[0])||void 0===e?void 0:e.ui)?null===(i=F[0].result)||void 0===i||null===(a=i[0])||void 0===a||null===(o=a.metadata)||void 0===o||null===(r=o.images)||void 0===r||null===(n=r[0])||void 0===n?void 0:n[t?"desktopUrl":"url"]:null}),[F]),z=B(F).find((function(e){return"billboard_image"===e.ui})),q=B(F).find((function(e){return"horizontal_category"===e.ui})),G=_sliced_to_array((0,w.useState)("rgb(13, 12, 34)"),2),Q=G[0],J=G[1],W=_sliced_to_array((0,w.useState)(!0),2),X=W[0],Y=W[1],$=_sliced_to_array((0,w.useState)(0),2),ee=$[0],te=$[1],ne=_sliced_to_array((0,w.useState)(0),2),re=ne[0],oe=ne[1],ae=_sliced_to_array((0,w.useState)(!1),2),ie=ae[0],se=ae[1],ce=_()((function(){var e=window.pageYOffset||document.documentElement.scrollTop,t=e>400?Math.min((e-400)/(window.innerHeight-400)*1.75,1):0,n=13,r=12,o=34,a=243,i=243,s=244,c=Math.round(n+t*(a-n)),l=Math.round(r+t*(i-r)),u=Math.round(o+t*(s-o)),d="rgba(".concat(c,", ").concat(l,", ").concat(u,", 0.97)");J(d)}),16),le=_()((function(){var e=window.scrollY;50>Math.abs(e-ee)||(Y(!(e>ee)),oe(window.innerHeight),te(e))}),500),ue=function(){ce(),le()};return(0,w.useEffect)((function(){return window.addEventListener("scroll",ue),function(){window.removeEventListener("scroll",ue)}}),[ee]),(0,w.useEffect)((function(){var t="yes"===e("image_search");se(t)}),[e]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P,{preloadImage:Z}),!t&&(0,i.jsx)(I.Z,{active:"HOME"}),(0,i.jsxs)(N(),{fetchMore:O,hasMore:!T&&!!S,hasError:!(!S||!j),children:[(0,i.jsx)(c(),{id:"cda38a89140842a3",dynamic:[Q,Q],children:".home-page--fade-img-bg.__jsx-style-dynamic-selector::before{background:-webkit-linear-gradient(top,rgba(13,12,34,0)0%,".concat(Q," 25%,").concat(Q," 50%,rgba(13,12,34,0)75%,rgba(13,12,34,0)100%);background:-moz-linear-gradient(top,rgba(13,12,34,0)0%,").concat(Q," 25%,").concat(Q," 50%,rgba(13,12,34,0)75%,rgba(13,12,34,0)100%);background:-o-linear-gradient(top,rgba(13,12,34,0)0%,").concat(Q," 25%,").concat(Q," 50%,rgba(13,12,34,0)75%,rgba(13,12,34,0)100%);background:linear-gradient(180deg,rgba(13,12,34,0)0%,").concat(Q," 25%,").concat(Q," 50%,rgba(13,12,34,0)75%,rgba(13,12,34,0)100%)}")}),!!(null==F?void 0:F.length)&&(0,i.jsx)("div",{className:c().dynamic([["cda38a89140842a3",[Q,Q]]])+" "+((0,l.Z)(g()["home-page"],_define_property({"home-page--fade-img-bg":u},g()["home-page--not-login"],!u))||""),children:(0,i.jsxs)("div",{className:c().dynamic([["cda38a89140842a3",[Q,Q]]])+" "+(g()["home-page__hero-section"]||""),children:[z&&(0,i.jsx)(D,{componentName:{name:z.name,ui:z.ui},banners:z.result[0].images,metaData:z.result,className:g()["image-slider"],speed:20,loop:!0}),q&&(0,i.jsx)(V,{items:q.result[0],className:(0,l.Z)(g()["home-page__category"],_define_property({},g()["home-page__category--not-login"],!u)),whiteTitle:!0,isCarouselFreeMode:!0},"".concat(q.ui))]})}),!S&&j&&(0,i.jsx)(A.Z,{fetch:k}),C&&(0,i.jsx)(R,{})]}),(0,i.jsx)("div",{className:g()["home-page__search-box"],style:{top:X?ee>re?"2vh":"9.5vh":ee>re?"-9vh":"-15vh"},children:(0,i.jsx)(E.Z,{isShowSearch:!0,openSearchModal:function(){return o(!0)},closeSearchModal:function(){return o(!1)},isShowSearchModal:r,canShowImageSearchIcon:ie,className:g()["home-page__search-field"]})}),(0,i.jsx)("div",{className:g()["home-page__discovery"],children:(0,i.jsx)(K,{enabled:L})})]})}var J=n(91740),W=n(94287),X=n(37314),Y=n(82074),$=d()((function(){return n.e(9666).then(n.bind(n,99666))}),{loadableGenerated:{webpack:function(){return[99666]}},ssr:!1}),ee=d()((function(){return Promise.all([n.e(9836),n.e(8739)]).then(n.bind(n,49836))}),{loadableGenerated:{webpack:function(){return[49836]}},ssr:!0}),te=(0,h.Z)({on:["visible"]})($);function ne(){var e=(0,M.b)(),t=e.ua,n=e.isWebview,r=(0,H.l)().getFeatureValue,o=(0,p.M_)(["currentUser"]).currentUser,a=(0,w.useMemo)((function(){return r("home_page",{})}),[r]),s=a.explore,c=void 0===s||s,l=a.discovery,u=void 0===l||l,d=(0,m.NS)({enabled:c,queryKey:["first-page-discovery"],getNextPageParam:function(e,t){var n;return 12===e.items.length||1===t.length?null===(n=e.meta)||void 0===n?void 0:n.lastRank:void 0},queryFn:function(e){var t=e.pageParam,n=void 0===t?0:t;return(0,U._I)({userId:null==o?void 0:o.id,config:{params:{size:12,item_size:12,lastRank:n,tab:"home_discovery"}}})}}),f=d.data,_=d.isError,v=d.isLoading,g=d.refetch,h=d.hasNextPage,b=d.fetchNextPage,y=d.isFetchingNextPage,x=(null==f?void 0:f.pages.length)>0&&!h&&u,j=(0,w.useMemo)((function(){var e;return null==f||null===(e=f.pages)||void 0===e?void 0:e.reduce((function(e,t){return _to_consumable_array(e).concat(_to_consumable_array(t.items||[]))}),[])}),[null==f?void 0:f.pages]),C=(0,w.useMemo)((function(){var e,n,r,o,a,i;return"billboard_image"===(null==j||null===(e=j[0])||void 0===e?void 0:e.ui)?null===(i=j[0].result)||void 0===i||null===(a=i[0])||void 0===a||null===(o=a.metadata)||void 0===o||null===(r=o.images)||void 0===r||null===(n=r[0])||void 0===n?void 0:n[t.isPc?"desktopUrl":"url"]:null}),[j,t.isPc]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P,{preloadImage:C}),t.isPc?(0,i.jsx)(W.default,{}):(0,i.jsx)(X.default,{isShowSearch:!0}),!t.isPc&&(0,i.jsx)(I.Z,{active:"HOME"}),(0,i.jsx)(J.Z,{}),(0,i.jsxs)(N(),{fetchMore:b,hasMore:!(y||_||v||!h),hasError:!(!h||!_),threshold:500,children:[!!(null==j?void 0:j.length)&&(0,i.jsx)(Y.Z,{sections:j}),!h&&_&&(0,i.jsx)(A.Z,{fetch:g}),v&&(0,i.jsx)(R,{})]}),(0,i.jsx)(te,{enabled:x}),!n&&(0,i.jsx)(ee,{})]})}var re=n(29723);function oe(){return(0,re.Kp)(["isIosApp"]).isIosApp?(0,i.jsx)(Q,{}):(0,i.jsx)(ne,{})}var ae,ie=n(27696),se=(0,a.isClientSide)();oe.getInitialProps=(ae=_async_to_generator((function(e){var t,n,a,i,s,c,l,u,d,f;return _ts_generator(this,(function(_){switch(_.label){case 0:if(t=e.req,n=e.res,a=e.userId,i=e.queryClient,s=e.isWebview,c=e.isCachedPage,!t)return[2,{}];l=(0,o.isIosApp)({req:t,res:n}),_.label=1;case 1:return _.trys.push([1,3,,4]),[4,i.fetchInfiniteQuery(["first-page-discovery"],(function(){return(0,U._I)({userId:a||0,config:{req:t,res:n,params:{lastRank:0,itemSize:12,tab:l?"home_ios":"home_discovery",size:!c||l||s?12:3}}})}))];case 2:return _.sent(),[3,4];case 3:return u=_.sent(),d=(0,r.Pt)(u),f=422===(null==d?void 0:d.statusCode)?404:d.statusCode||500,[2,(!se&&n&&(n.statusCode=f),{error:{statusCode:f}})];case 4:return[2,{}]}}))})),function(e){return ae.apply(this,arguments)});var ce=(0,ie.Z)(oe)},59808:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var r={v1:"v1.0",v2:"v2.0",v3:"v3.0"};function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"v1";return e?r.v3:r[t]}},45728:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(84308)}])},58395:function(e){e.exports={"home-page":"EJOlFJ","home-page--not-login":"_0gqXCS","home-page__hero-section":"Nohss0","home-page__search-box":"PeC1dd","home-page__search-field":"qenW_z","home-page__category":"FQ6SiD","home-page__category--not-login":"PFSB4M","home-page__discovery":"_X_e3z","image-slider":"nyqL6K"}},71335:function(e){e.exports={"bottom-navigation-item":"_B9G_j","bottom-navigation-item__icon":"NnNxOM","bottom-navigation-item__icon--has-point":"ruoP5A","bottom-navigation-item__title":"FPnqyE","bottom-navigation-item__count":"RLQqPM","bottom-navigation-item__icon-svg":"_2l6lcT","bottom-navigation-item--active":"sbmTp7"}},79862:function(e){e.exports={"bottom-navigation":"bL4ZpA","bottom-navigation__nav":"Q_F1dh","bottom-navigation__nav-item":"_5jDyz9","bottom-navigation__nav-item-title":"_7vw_9A","bottom-navigation__nav-item-count":"_8_ftrv","bottom-navigation__nav-item--active":"TP970F"}}},function(e){e.O(0,[973,9600,8597,2791,3501,6816,7314,3306,4287,9380,4296,9691,1740,2074,9774,2888,179],(function(){return e(e.s=45728)})),_N_E=e.O()}]);