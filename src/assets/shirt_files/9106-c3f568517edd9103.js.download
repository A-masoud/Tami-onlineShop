function _array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _array_with_holes(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function _async_to_generator(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){asyncGeneratorStep(i,n,o,a,s,"next",e)}function s(e){asyncGeneratorStep(i,n,o,a,s,"throw",e)}a(void 0)}))}}function _define_property(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _iterable_to_array_limit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){_define_property(e,t,r[t])}))}return e}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _object_spread_props(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function _sliced_to_array(e,t){return _array_with_holes(e)||_iterable_to_array_limit(e,t)||_unsupported_iterable_to_array(e,t)||_non_iterable_rest()}function _unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return _array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_array_like_to_array(e,t):void 0}}function _ts_generator(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9106],{62496:function(e,t,r){"use strict";r.d(t,{$:function(){return a}});var n=r(84581),o=r(88592),i=r(27434);function a(){var e=(0,o.M_)(["currentUser","typeOfUser","isLoggedIn","orderCount"]),t=e.currentUser,r=e.typeOfUser,a=e.isLoggedIn,s=e.orderCount,l=_sliced_to_array((0,i.useState)({}),2),u=l[0],c=l[1],d=(0,i.useRef)({}),v=(0,i.useRef)(null),f=!a||"number"==typeof s,h=function(){var e={typeOfUser:r,orderCount:s,currentUser:t,isUserDataReady:f};Object.entries(u).forEach((function(t){var r=_sliced_to_array(t,2),o=r[0],i=r[1],a=i.data,s=i.when,l=i.sendOnce,u=void 0!==l&&l;if(!(d.current[o]||void 0===s&&!f||"function"==typeof s&&!(null==s?void 0:s(e)))){var c="function"==typeof a?a(e):a;(0,n.s)(o,c),d.current[o]=u}}))};(0,i.useEffect)((function(){clearTimeout(v.current),v.current=setTimeout(h,50)}),[u,t,f,r]);var p=(0,i.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.data,n=t.when,o=t.sendOnce;c((function(t){return _object_spread_props(_object_spread({},t),_define_property({},e,{data:r,when:n,sendOnce:o}))}))}),[]);return{sendEvent:p}}},70543:function(e,t,r){"use strict";var n=r(32930),o=r(40877),i=r(54922),a=r(18021),s=r(49631),l=r(87541),u=r.n(l),c=r(53633),d=r(84714),v=r(94288),f=r(51112),h=r(23489),p=r(45835),g=r(77963),y=r(4982),_=r(90525),b=r(67117),m=r(27434),j=r(43114),w=r(177),S=r.n(w),x=r(40228),C=r.n(x),P=r(39145),O=r.n(P),k=r(7095),A=r.n(k);t.Z=function(e){var t,r=e.isLoading,l=void 0!==r&&r,w=e.overrideParams,x=void 0===w?{}:w,P=e.isShowSearchSorts,k=void 0===P||P,E=e.isShowSearchFilters,I=void 0===E||E,Z=(0,p.b)().ua,F=(0,g.A)(),N=F.configs,L=F.filters,q=F.setSelectedFilters,D=(null==N?void 0:N.search_size_per_page)||j.d_,T=(0,m.useRef)(null),U=_sliced_to_array((0,m.useState)(!1),2),R=U[0],H=U[1],M=(0,d.ty)({enabled:!l,getNextPageParam:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).length*D;return t>=e.meta.count?void 0:{from:t}}},_object_spread({size:D},x)),G=M.data,z=M.error,B=M.isError,V=M.hasNextPage,Q=M.fetchNextPage,$=M.isFetchingNextPage,J=M.isLoading,K=(0,m.useMemo)((function(){var e;return null==G||null===(e=G.pages)||void 0===e?void 0:e.reduce((function(e,t){return e.concat(t.products)}),[])}),[null==G?void 0:G.pages]),W=(null==G?void 0:G.pages[0].sorts)||j.kg,X=(null==G?void 0:G.pages[0].dynamicFacets)||[],Y=(0,_.o)(X,L).filters,ee=(0,m.useCallback)((function(){var e,t=document.querySelector("#header"),r=document.querySelector("#header-placeholder"),n=window.isHeaderVisible?r.clientHeight+t.getBoundingClientRect().top:0,o=null===(e=T.current)||void 0===e?void 0:e.getBoundingClientRect().top;H(o<=n)}),[]);(0,m.useEffect)((function(){(0,y.MQ)(!0)}),[Y.q]),(0,m.useEffect)((function(){q(null==G?void 0:G.pages[0].selectedFacets)}),[null==G?void 0:G.pages]);var te=null==z||null===(t=z.message)||void 0===t?void 0:t.startsWith("timeout");return(0,m.useEffect)((function(){return Z.isPc||window.addEventListener("scroll",ee),function(){return window.removeEventListener("scroll",ee)}}),[]),(0,n.jsxs)(n.Fragment,{children:[l||J?(0,n.jsx)(c.Z,{className:u()["search-page"],isShowSearchSorts:k,isShowSearchFilters:I}):(0,n.jsxs)(S(),{className:(0,o.Z)(u()["search-page"],u()["search-page--light"]),fluid:!0,children:[!Z.isPc&&(0,n.jsx)("div",{className:u()["search-page__quick-access"],ref:T,children:R?(0,n.jsx)(A(),{target:"#header-mobile--outer",children:(0,n.jsx)(v.Z,{isShowNameFilter:!0,dynamicFacets:X,sorts:W})}):(0,n.jsx)(v.Z,{className:u()["search-page__quick-access-mobile"],isShowNameFilter:!0,dynamicFacets:X,sorts:W})}),(0,n.jsxs)(C(),{noGutter:!Z.isPc,children:[I&&Z.isPc&&(0,n.jsx)(C().Col,{lg:4,xl:3,children:(0,n.jsx)(s.Z,{dynamicFacets:X,isShowNameFilter:!0})}),(0,n.jsxs)(C().Col,{xs:12,lg:I&&Z.isPc?8:12,xl:I&&Z.isPc?9:12,className:(0,o.Z)(_define_property({},u()["search-page__no-padding"],!Z.isPc||!I)),children:[k&&(0,n.jsx)(a.Z,{sorts:W}),(null==K?void 0:K.length)?(0,n.jsxs)(O(),{threshold:Z.isPc?900:400,fetchMore:Q,hasError:V&&B,hasMore:!$&&V||!1,children:[(0,n.jsx)(f.Z,{products:K,isShowAddToCartBtn:!0,showVendor:!1}),(J||$)&&(0,n.jsx)(b.Z,{count:Z.isPc?8:4})]}):(0,n.jsx)(i.Z,{hasTimeoutError:te})]})]})]}),(0,n.jsx)(h.Z,{})]})}},59106:function(e,t,r){"use strict";var n,o=r(32930),i=r(27434),a=r(16339),s=r.n(a),l=r(58271),u=r(94287),c=r(62496),d=r(33918),v=r(68254),f=r(87694),h=r(45835),p=r(88107),g=r(39029),y=r(177),_=r.n(y),b=r(81433),m=r.n(b),j=r(49224),w=r(35824),S=r(96929),x=r(94505),C=r(70543),P=r(77963),O=r(15105),k=r(5164);function A(e){var t,r=e.identifier,n=e.isShowHighlights,a=(0,h.b)().ua,l=(0,p.Z)(),f=r||l.query.vendorIdentifier,y=(0,g.b)(f,{},{enabled:!!f}),b=y.data,S=y.isLoading,A=d.IU.DISABLE.includes(null==b?void 0:b.status.value),E=(0,c.$)().sendEvent;return(0,i.useEffect)((function(){f&&b&&E("vendorView",{sendOnce:!1,data:function(e){var t,r,n,o,i,a;return{orderCount:e.orderCount,typeOfUser:e.typeOfUser,identifier:f,vendorId:null==b?void 0:b.id,vendorName:null==b?void 0:b.title,salesCount:null==b?void 0:b.orderCount,vendorCityName:b.city.name,cityId:null==b||null===(r=b.user)||void 0===r||null===(t=r.city)||void 0===t?void 0:t.value,vendorCityId:null==b||null===(n=b.city)||void 0===n?void 0:n.value,vendorStatus:b.status.value,vendorCreatedAt:null==b?void 0:b.createdAt,cityName:null==b||null===(i=b.user)||void 0===i||null===(o=i.city)||void 0===o?void 0:o.name,productsCount:null==b?void 0:b.productCount,vendorSaleCount:null==b?void 0:b.orderCount,vendorIdentifier:b.identifier,vendorSalesCount:null==b?void 0:b.orderCount,vendorLastActivity:b.lastActivity,vendorProductCount:null==b?void 0:b.productCount,lastActivity:null==b||null===(a=b.user)||void 0===a?void 0:a.lastActivity,comesFromPage:k.bsLocalStorage.getItem("comesFromPage"),comesFromMeta:k.bsLocalStorage.getItem("comesFromMeta"),comesFromComponent:k.bsLocalStorage.getItem("comesFromComponent"),vendorIsActive:b.status.value===d.IU.ACTIVE,vendorLastActivityDaysAgo:b.lastActivity?(0,k.gregoryDate)().diff((0,k.gregoryDate)(b.lastActivity),"d"):null}}})}),[f,E,b]),(0,o.jsxs)("div",{className:s()["vendor-page"],children:[(0,o.jsx)(v.Z,{identifier:f}),a.isPc?(0,o.jsx)(u.default,{}):(0,o.jsx)(w.Z,{vendor:b}),(0,o.jsx)(_(),{children:a.isPc&&(0,o.jsx)(m(),{mt:12,mb:28,children:(0,o.jsx)(x.Z,{vendor:b})})}),(0,o.jsx)(O.Z,{isShowHighlights:n,identifier:f,activeTab:"PRODUCTS"}),A&&(0,o.jsx)(j.Z,{vendor:b}),!A&&f&&(0,o.jsx)(m(),{mt:20,children:(0,o.jsx)(P.X,{children:(0,o.jsx)(C.Z,{isLoading:S,isShowSearchSorts:a.isPc,overrideParams:{vendor_sort:null==b||null===(t=b.productSortType)||void 0===t?void 0:t.value,filters:{vendorIdentifier:f}}})})})]})}A.getInitialProps=(n=_async_to_generator((function(e){var t,r,n,o,i,a,s,u,c,d,v,h,p,g,y,_;return _ts_generator(this,(function(b){switch(b.label){case 0:if(t=e.req,r=e.res,n=e.query,o=e.queryClient,!t)return[2,{}];i=n.vendorIdentifier,b.label=1;case 1:return b.trys.push([1,3,,4]),"null"===i||"undefined"===i||(0,k.hasPersianCharacter)(i)?[2,(r.statusCode=404,{error:{statusCode:404}})]:[4,(0,S.bt)(i,10)];case 2:return p=b.sent(),o&&(null==p||null===(s=p.vendor)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.length)>0&&o.setQueryData(["vendor",i],p.vendor),o&&(null==p||null===(c=p.userHighlights)||void 0===c||null===(u=c.highlights)||void 0===u?void 0:u.length)>0&&o.setQueryData(["story",f.sY,i],{pageParams:[0],pages:[{highlights:p.userHighlights.highlights,lastRank:p.userHighlights.lastRank||0}]}),0===(null==p||null===(d=p.vendor)||void 0===d?void 0:d.totalCount)?[2,(r.statusCode=404,{error:{statusCode:404}})]:[2,{isShowHighlights:!!(null==p||null===(h=p.userHighlights)||void 0===h||null===(v=h.highlights)||void 0===v?void 0:v.length)}];case 3:return g=b.sent(),y=(0,l.Pt)(g),_=422===(null==y?void 0:y.statusCode)?404:y.statusCode||500,[2,(r.statusCode=_,{error:{statusCode:_}})];case 4:return[2]}}))})),function(e){return n.apply(this,arguments)}),t.Z=A},87541:function(e){e.exports={"search-page":"F7gOTZ","search-page--light":"LTrc_u","search-page__quick-access-mobile":"Gjix3G","search-page__related-queries-title":"ejq9Is","search-page__related-queries":"CcfRxa","search-page__container":"RwnDoS","search-page__quick-access":"H_R7Jk","search-page__no-padding":"_0HJEzz","search-page__header-mobile":"sLTZSw"}},16339:function(e){e.exports={"vendor-page":"_4yAlPe"}}}]);