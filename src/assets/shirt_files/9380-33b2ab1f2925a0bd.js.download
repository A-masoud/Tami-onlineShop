"use strict";function _define_property(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _object_spread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){_define_property(t,e,n[e])}))}return t}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _object_spread_props(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ownKeys(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9380],{90507:function(t,e,n){n.d(e,{I:function(){return u},N:function(){return o}});var r=n(79614);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.yX.get("api_v1.0/user-last-activity/".concat(t),e)}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.Zs.get("/api_v2/vendor/products",t)}},87694:function(t,e,n){n.d(e,{sY:function(){return c},HL:function(){return l},X2:function(){return v},xT:function(){return K},lj:function(){return I},dU:function(){return m},VK:function(){return h},EU:function(){return y},nU:function(){return j},Bp:function(){return w},Nm:function(){return d},EY:function(){return b},oE:function(){return N},kZ:function(){return q},$B:function(){return D},ml:function(){return O},I1:function(){return C},TA:function(){return L},fK:function(){return P},NS:function(){return F},br:function(){return k},uX:function(){return _},eH:function(){return g}});var r=n(27434),o=n(17902),u=n(48228),i=n(59403),s=n(99374),a=n(32066),c="user-highlights",l="user-stories",f="story-feed",p="users-stories",d=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,o.aM)(_object_spread_props(_object_spread({},n),{queryKey:[l,t],queryFn:function(){return(0,a.mu)(t,e)},select:function(t){return(0,s.qV)(t,e)}}))},_=function(t){var e=(0,o.NL)();return(0,r.useCallback)((function(n,r){e.setQueryData([l,t],(function(t){return function(t,e,n){return _object_spread_props(_object_spread({},t),{stories:t.stories.map((function(t){return t.id===e?_object_spread({},t,n):t}))})}(t,n,r)}))}),[t,e])},v=function(){return(0,u.D)(["add-story"],a.Z6)},y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.aM)(_object_spread({queryKey:["my-stories"],select:function(e){return(0,s.wz)(e,t)},queryFn:function(){return(0,a.TB)({params:{active_only:!0,last_id:0,old_reponse_mode:!1}},t)}},e))},b=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,o.aM)(_object_spread({queryKey:[p,t],queryFn:function(){return(0,a.$f)(t,e)},select:function(t){return(0,s.Pn)(t,e)}},n))},g=function(t){var e=(0,o.NL)();return(0,r.useCallback)((function(n,r){e.setQueryData([p,t],(function(t){return function(t,e,n){var r=t.map((function(t){return _object_spread_props(_object_spread({},t),{stories:t.stories.map((function(t){return t.id===e?_object_spread({},t,n):t}))})}));return r}(t,n,r)}))}),[t,e])},j=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,o.aM)(_object_spread({queryKey:["single-story",t],queryFn:function(){return(0,a.vu)(t,e)},select:function(t){return(0,s.V5)(t,e).data}},n))},h=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,i.N)(_object_spread({queryKey:["hashtag",t],select:function(t){return(0,s.e9)(t,e)},queryFn:function(n){var r=n.pageParam,o=void 0===r?0:r;return(0,a.yq)({params:{hashtag:t,last_id:o}},e)},getNextPageParam:function(t){if(t.lastId>0)return t.lastId}},n))},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t&&t.length>=2;return(0,o.aM)(_object_spread({enabled:n,queryKey:n?["autocomplete-hashtag",t]:null,queryFn:function(e){var n=e.signal;return(0,a.A1)(t,5,{signal:n})},select:function(t){var e,n;return null!==(n=null==t||null===(e=t.result)||void 0===e?void 0:e.map((function(t){return t.title})))&&void 0!==n?n:[]}},e))},w=function(t,e){return(0,i.N)({queryKey:["story",c,t],select:function(t){return(0,s.Jk)(t,e)},queryFn:function(n){var r=n.pageParam,o=void 0===r?0:r;return(0,a.wJ)({identifier:t,lastRank:o,count:10},e)},getNextPageParam:function(t){if(t.lastRank>0)return t.lastRank}})},k=function(t){var e=(0,o.NL)();return(0,r.useCallback)((function(n,r){e.setQueryData(["story",c,t],(function(t){return function(t,e,n){var r=t.pages.map((function(t){var r=t.highlights.map((function(t){var r=t.stories.map((function(t){return t.id===e?_object_spread({},t,n):t}));return _object_spread_props(_object_spread({},t),{stories:r})}));return _object_spread_props(_object_spread({},t),{highlights:r})}));return _object_spread_props(_object_spread({},t),{pages:r})}(t,n,r)}))}),[t,e])},O=function(t,e){return(0,i.N)({queryKey:[f],select:function(t){return(0,s.xj)(t,e)},queryFn:function(n){var r=n.pageParam,o=void 0===r?[]:r;return(0,a.tz)({vendors:o,count:t,newVersion:e})},getNextPageParam:function(t,e){if(0!==t.length){var n=[],r=!0,o=!1,u=void 0,i=!0,s=!1,a=void 0;try{for(var c,l=e[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var f=c.value;try{for(var p,d=f[Symbol.iterator]();!(r=(p=d.next()).done);r=!0){var _,v=p.value;n.push(null==v||null===(_=v.user)||void 0===_?void 0:_.id)}}catch(t){o=!0,u=t}finally{try{r||null==d.return||d.return()}finally{if(o)throw u}}}}catch(t){s=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(s)throw a}}return n}}})},F=function(){var t=(0,o.NL)();return(0,r.useCallback)((function(e,n){t.setQueryData([f],(function(t){return function(t,e,n){var r=t.pages.map((function(t){var r=t.map((function(t){var r=t.stories.map((function(t){return t.id===e?_object_spread({},t,n):t}));return _object_spread_props(_object_spread({},t),{stories:r})}));return r}));return _object_spread_props(_object_spread({},t),{pages:r})}(t,e,n)}))}),[t])},P=function(){var t=(0,o.NL)();return(0,r.useCallback)((function(e,n){t.setQueryData(["mixed-page-discovery"],(function(t){return _object_spread_props(_object_spread({},t),{pages:t.pages.map((function(t){return _object_spread_props(_object_spread({},t),{components:t.components.map((function(t){var r;return"story"===(null==t?void 0:t.type)&&(null==t||null===(r=t.story)||void 0===r?void 0:r.id)===e?_object_spread_props(_object_spread({},t),{story:_object_spread({},t.story,n)}):"stories"===(null==t?void 0:t.type)?_object_spread_props(_object_spread({},t),{stories:t.stories.map((function(t){return(null==t?void 0:t.id)===e?_object_spread({},t,n):t}))}):t}))})}))})}))}),[t])},q=function(){var t=(0,o.NL)();return(0,r.useCallback)((function(e){t.setQueryData([f],(function(t){return function(t,e){var n=t.pages.map((function(t){return t.filter((function(t){return t.user.id!==e}))}));return _object_spread_props(_object_spread({},t),{pages:n})}(t,e)}))}),[t])},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.D)(a.N5,t)},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.D)(a.kT,t)},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.D)(a.Vw,t)},K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.D)(a.qM,t)},L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.D)(a.ie,t)},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.D)(a.$J,t)}},99374:function(t,e,n){n.d(e,{Fv:function(){return u},Jk:function(){return a},KD:function(){return r},Pn:function(){return p},V5:function(){return l},e9:function(){return c},qV:function(){return f},wz:function(){return s},xj:function(){return i}});var r=function(t){var e,n,r,o,u,i,s,a,c={id:t.id,photo:t.photo,video:t.video,userId:t.userId,hashtags:t.hashtags,metadata:t.metadata,createdAt:t.createdAt,link:4048===t.entityTypeId?{link:null===(n=t.metadata)||void 0===n||null===(e=n.link)||void 0===e?void 0:e.link,title:null===(o=t.metadata)||void 0===o||null===(r=o.link)||void 0===r?void 0:r.title}:null,products:2971===t.entityTypeId?[{id:null===(u=t.entity)||void 0===u?void 0:u.id,title:null===(i=t.entity)||void 0===i?void 0:i.title,price:null===(s=t.entity)||void 0===s?void 0:s.price,photo:null===(a=t.entity)||void 0===a?void 0:a.photo}]:[]};return"likeCount"in t&&(c.likeCount=t.likeCount),"viewCount"in t&&(c.viewCount=t.viewCount),"isFiltered"in t&&(c.isFiltered=t.isFiltered),"user"in t&&(c.user=t.user),"like"in t&&(c.like=t.like),"seen"in t&&(c.seen=t.seen),"isFollowed"in t&&(c.isFollowed=t.isFollowed),"seenAt"in t&&(c.isSeen=!!t.seenAt),"isLiked"in t&&(c.isLiked=t.isLiked),c},o=function(t){return{id:t.id,name:t.name,avatar:t.avatar,hashId:t.hashId,vendor:t.vendor}},u=function(t,e,n){return e?t:n(t)},i=function(t,e){return u(t,e,(function(t){return t.map((function(t){return{user:o(t),isFollowed:t.isFollowed,suggestLabel:t.suggestLabel,stories:t.stories.map((function(t){return r(t)}))}}))}))},s=function(t,e){return u(t,e,(function(t){return _object_spread_props(_object_spread({},t),{stories:t.stories.map((function(t){return r(t)}))})}))},a=function(t,e){return u(t,e,(function(t){return _object_spread_props(_object_spread({},t),{highlights:t.highlights.map((function(t){return _object_spread_props(_object_spread({},t),{stories:t.stories.map((function(t){return r(t)}))})}))})}))},c=function(t,e){return u(t,e,(function(t){return _object_spread_props(_object_spread({},t),{stories:t.stories.map((function(t){return r(t)}))})}))},l=function(t,e){return u(t,e,(function(t){return _object_spread_props(_object_spread({},t),{data:{user:o(t.data),isFollowed:t.data.isFollowed,stories:t.data.stories.map((function(t){return r(t)}))}})}))},f=function(t,e){return u(t,e,(function(t){return 0===Object.keys(t.stories).length?{stories:[]}:{user:o(t.stories),isFollowed:t.stories.isFollowed,stories:t.stories.stories.map((function(t){return r(t)}))}}))},p=function(t,e){return u(t,e,(function(t){return t.map((function(t){return{user:o(t),isFollowed:t.isFollowed,stories:t.stories.map((function(t){return r(t)}))}}))}))}}}]);