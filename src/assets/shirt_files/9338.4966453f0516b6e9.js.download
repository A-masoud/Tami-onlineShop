function _array_like_to_array(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}function _array_with_holes(e){if(Array.isArray(e))return e}function _array_without_holes(e){if(Array.isArray(e))return _array_like_to_array(e)}function asyncGeneratorStep(e,r,t,i,s,a,n){try{var o=e[a](n),l=o.value}catch(e){return void t(e)}o.done?r(l):Promise.resolve(l).then(i,s)}function _async_to_generator(e){return function(){var r=this,t=arguments;return new Promise((function(i,s){var a=e.apply(r,t);function n(e){asyncGeneratorStep(a,i,s,n,o,"next",e)}function o(e){asyncGeneratorStep(a,i,s,n,o,"throw",e)}n(void 0)}))}}function _define_property(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _iterable_to_array(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _iterable_to_array_limit(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,s,a=[],n=!0,o=!1;try{for(t=t.call(e);!(n=(i=t.next()).done)&&(a.push(i.value),!r||a.length!==r);n=!0);}catch(e){o=!0,s=e}finally{try{n||null==t.return||t.return()}finally{if(o)throw s}}return a}}function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},i=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(r){_define_property(e,r,t[r])}))}return e}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function _object_spread_props(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})),e}function _sliced_to_array(e,r){return _array_with_holes(e)||_iterable_to_array_limit(e,r)||_unsupported_iterable_to_array(e,r)||_non_iterable_rest()}function _to_consumable_array(e){return _array_without_holes(e)||_iterable_to_array(e)||_unsupported_iterable_to_array(e)||_non_iterable_spread()}function _unsupported_iterable_to_array(e,r){if(e){if("string"==typeof e)return _array_like_to_array(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_array_like_to_array(e,r):void 0}}function _ts_generator(e,r){var t,i,s,a,n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;n;)try{if(t=1,i&&(s=2&a[0]?i.return:a[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,a[1])).done)return s;switch(i=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(s=n.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){n=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){n.label=a[1];break}if(6===a[0]&&n.label<s[1]){n.label=s[1],s=a;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(a);break}s[2]&&n.ops.pop(),n.trys.pop();continue}a=r.call(e,n)}catch(e){a=[6,e],i=0}finally{t=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9338],{79346:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return ye}});var i=t(32930),s=t(81433),a=t.n(s),n=t(40877),o=t(16239),l=t.n(o),c=t(7287),d=t(99173),u=t.n(d),_=t(65074),v=t.n(_),m=t(45835),w=function(e){var r=e.onClick,t=e.isInline,s=e.className,a=void 0===s?"":s,o=e.numberOfReviews,l=(0,m.b)().ua,c=1===o?"مشاهده تجربه (".concat(o,")"):"مشاهده تجربه خریدها (".concat(o,")");return(0,i.jsx)("div",{className:(0,n.Z)(a,u()["reviews-footer"],_define_property({},u()["reviews-footer--inline"],t)),children:t?(0,i.jsx)(v(),{fullWidth:!0,size:l.isPc?"sm":"xs",color:"secondary",variant:"outline",onClick:r,label:c}):(0,i.jsx)(v(),{size:l.isPc?"sm":"xs",color:"secondary",variant:"outline",onClick:r,iconPosition:"center-end",icon:"bi-angle-left",label:c})})},p=t(3744),h=t.n(p),f=t(27434),y=t(5164),b=t(3935),g=t(90725),x=t.n(g),j=t(36350),N=t(73867),k=t.n(N),S=t(58271),C=t(85945),I=t(81174),z=t.n(I),P=t(92034),O=t.n(P),R=t(20295),D={dislike:["بیش از حد کلی بودن","نادیده گرفتن نکات منفی","کمک نکردن به تصمیم خرید","شباهت نداشتن به نظرات کاربران"],like:["مشخص بودن نکات مثبت و منفی","کمک کردن به تصمیم خرید","بی‌طرفانه و منصفانه بودن","کوتاه بودن و وقت‌گیر نبودن"]};function Z(){var e,r=_sliced_to_array((0,f.useState)(null),2),t=r[0],s=r[1],a=_sliced_to_array((0,f.useState)([]),2),o=a[0],l=a[1],c=_sliced_to_array((0,f.useState)(""),2),d=c[0],u=c[1],_=(0,m.b)().ua,w=(0,j.useSnackbar)().showSuccessSnackbar,p=_sliced_to_array((0,j.useDisclosure)(!1),2),h=p[0],y=p[1],g=y.open,x=y.close,N=(0,b.U)().productReviewSummary,I=(0,R.o)(N.summaryId),P=I.mutate,Z=I.isLoading,A=(0,C.NL)(),L=N.action,E=(0,f.useCallback)((function(){x(),u(""),l([])}),[x]),M=(0,f.useCallback)((function(e){var r=e===L?null:e;if(r)return s(r),void g();A.setQueriesData(["review-summary",N.productId],(function(e){return{data:_object_spread_props(_object_spread({},e.data),{action:r})}})),P({action:"undo"})}),[P,N.productId,A,L,g]),T=(0,f.useCallback)((function(){P({action:t,description:d,reason:o},{onError:S.S_,onSuccess:function(){A.setQueriesData(["review-summary",N.productId],(function(e){return{data:_object_spread_props(_object_spread({},e.data),{action:t})}})),w("ثبت شد. دستت درد نکنه. "),E()}})}),[P,t,o,E,d,w,N.productId,A]),G=(0,f.useCallback)((function(e){return o.includes(e)}),[o]),H=(0,f.useCallback)((function(e){G(e)?l((function(r){return r.filter((function(r){return r!==e}))})):l((function(r){return _to_consumable_array(r).concat([e])}))}),[o,G]);return(0,i.jsxs)("div",{className:k().feedback,children:["این خلاصه مفید بود؟",(0,i.jsx)(v(),{square:!0,size:"xs",variant:"outline",color:"like"===L?"primary":"secondary",icon:"bi-like-thumb",onClick:function(){return M("like")},className:k().feedback__like}),(0,i.jsx)(v(),{square:!0,size:"xs",variant:"outline",color:"dislike"===L?"primary":"secondary",icon:"bi-dislike-thumb",onClick:function(){return M("dislike")},className:k().feedback__dislike}),(0,i.jsxs)(O(),{show:h,onClose:E,title:"از بازخوردت ممنون",bodyClass:k().feedback__modal,primaryButton:(0,i.jsx)(v(),{label:"ثبت",loading:Z,onClick:T,size:_.isPc?"lg":"sm",disabled:0===o.length&&!d}),children:["چی از خلاصه تجربه‌ها برات مفید ".concat("like"===t?"بود":"نبود","؟"),(0,i.jsx)("div",{className:k()["feedback__modal-reasons"],children:null===(e=D[t])||void 0===e?void 0:e.map((function(e){return(0,i.jsx)("div",{className:(0,n.Z)(k()["feedback__modal-reason"],_define_property({},k()["feedback__modal-reason--selected"],G(e))),onClick:function(){return H(e)},children:e},e)}))}),(0,i.jsx)(z(),{title:"نوشتن نظر",placeholder:"اینجا بنویس",value:d,onChange:function(e){return u(e.target.value)},maxLength:400,isMultiline:!0,rows:3,wrapperClassName:k()["feedback__modal-input"]})]})]})}var A=t(53278),L=t.n(A),E=function(e,r){var t=e.indexOf(r);return-1===t?{start:e}:{highlight:r,start:e.slice(0,t),end:e.slice(t+r.length)}};function M(e){var r=e.show,t=e.data,s=e.selectedAspect,a=e.onClose,o=(0,m.b)().ua,l=(0,j.useEmitter)().emitEvent,c=_sliced_to_array((0,f.useState)(null),2),d=c[0],u=c[1];(0,f.useEffect)((function(){u(s)}),[s]);return(0,i.jsxs)(O(),{show:r,onClose:a,className:x().aspects,title:"خلاصه تجربه‌ خریداران",headerPrependComponent:(0,i.jsx)(L(),{className:x().aspects__icon,src:"https://statics.basalam.com/public-63/admin/67gZL/02-18/ImGyBi5vHrKgLoX5n5Snw0dScOgCBJPPp18seexY64CRz34xNH.SVG"}),children:[(0,i.jsx)("div",{className:x().aspects__list,children:t.aspectSummary.map((function(e){return(0,i.jsx)(v(),{size:"xxs",label:e.aspect,color:"secondary",variant:"outline",onClick:function(){return function(e){setTimeout((function(){u(e),(0,y.publishEvent)("reviewSummaryAspectSelect",{component:"modal",productId:t.productId,aspectTitle:e.aspect})}),0)}(e)},className:(0,n.Z)(x().aspects__label,_define_property({},x()["aspects__label--selected"],(null==d?void 0:d.aspect)===e.aspect))},e.aspect)}))}),(0,i.jsxs)("div",{className:x().aspects__content,children:[null==d?void 0:d.summary,null==d?void 0:d.sampleReviews.map((function(e){var r=E(e.text,e.highlight);return(0,i.jsxs)("div",{className:x().aspects__review,children:[r.start,(0,i.jsx)("b",{children:r.highlight}),r.end,(0,i.jsx)(v(),{size:"xxs",variant:"plain",color:"secondary",label:"مشاهده بیشتر",className:x().aspects__button,onClick:function(){return l("show-single-review-modal",e.id)}})]},e.id)})),(0,i.jsx)("div",{className:x().aspects__description,children:"این خلاصه با هوش مصنوعیه. ممکنه دقیق نباشه."})]}),!o.isPc&&(0,i.jsx)(Z,{})]})}function T(){var e=_sliced_to_array((0,f.useState)(!1),2),r=e[0],t=e[1],s=_sliced_to_array((0,f.useState)(null),2),n=s[0],o=s[1],l=_sliced_to_array((0,f.useState)(!1),2),c=l[0],d=l[1],u=(0,b.U)(),_=u.isShowReviewSummary,m=u.productReviewSummary,w=(0,f.useMemo)((function(){return m?r||m.summary.length<400?m.summary:"".concat(m.summary.slice(0,400),"..."):""}),[r,m]);return _&&(0,i.jsxs)("div",{id:"review-summary",className:h()["review-summary"],children:[(0,i.jsxs)(a(),{display:"flex",alignItems:"center",gap:8,children:[(0,i.jsx)(L(),{className:h()["review-summary__icon"],src:"https://statics.basalam.com/public-63/admin/67gZL/02-18/ImGyBi5vHrKgLoX5n5Snw0dScOgCBJPPp18seexY64CRz34xNH.SVG"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:h()["review-summary__title"],children:"خلاصه تجربه‌ خریداران"}),(0,i.jsx)("div",{className:h()["review-summary__subtitle"],children:"توسط هوش مصنوعی"})]})]}),(0,i.jsxs)("div",{className:h()["review-summary__box"],children:[w,m.summary.length>400&&(0,i.jsx)(v(),{size:"xs",variant:"plain",color:"secondary",onClick:function(){setTimeout((function(){t((function(e){return!e}))}),0)},className:h()["review-summary__button"],label:"مشاهده ".concat(r?"کمتر":"بیشتر")}),(0,i.jsx)("div",{className:h()["review-summary__aspects-title"],children:"برای جزئیات بیشتر یکی از موارد زیر رو انتخاب کن:"}),(0,i.jsx)("div",{className:h()["review-summary__aspects"],children:m.aspectSummary.map((function(e){return(0,i.jsx)(v(),{size:"xxs",label:e.aspect,color:"secondary",variant:"outline",onClick:function(){return function(e){setTimeout((function(){o(e),d(!0),(0,y.publishEvent)("reviewSummaryAspectSelect",{component:"summary",aspectTitle:e.aspect,productId:m.productId})}),0)}(e)},className:h()["review-summary__aspect"]},e.aspect)}))})]}),(0,i.jsx)(Z,{}),(0,i.jsx)(M,{show:c,data:m,selectedAspect:n,onClose:function(){return d(!1)}})]})}var G=t(14845),H=t.n(G),Q=t(40463),W=t(70437),F=t.n(W),U=t(94640),Y=t(29221),B=function(){var e,r,t=(0,m.b)().ua.isMobile,s=(0,j.useEmitter)().emitEvent,a=(0,Q.G)().product,o=(0,Y.up)({productId:null==a?void 0:a.id}),l=null===(r=o.data)||void 0===r||null===(e=r.pages)||void 0===e?void 0:e.slice().pop(),c=(0,f.useMemo)((function(){return(0,U.H)(null==l?void 0:l.reviews)}),[null==l?void 0:l.reviews]),d=function(e){s("show-pdp-gallery-modal",{id:e})};if(!o.isLoading&&0===c.length)return null;var u=t?4:3;return(0,i.jsx)("div",{className:H()["reviews-gallery"],children:(0,i.jsx)("div",{className:H()["reviews-gallery__photos"],children:(0,i.jsxs)("div",{className:H()["reviews-gallery__photos-wrapper"],children:[o.isLoading&&(0,y.generateArray)(u).map((function(e){return(0,i.jsx)(F(),{className:H()["reviews-gallery__photo-item"]},e)})),c.slice(0,u).map((function(e,r){return(0,i.jsx)("div",{className:H()["reviews-gallery__photo-item"],onClick:function(){return d(r)},children:"photo"===e.type?(0,i.jsx)(L(),{src:e.small,className:H()["reviews-gallery__photo"],lazy:!0}):e.thumbnail?(0,i.jsx)(L(),{src:e.thumbnail,className:H()["reviews-gallery__photo"],lazy:!0}):(0,i.jsx)("i",{className:(0,n.Z)(H()["reviews-gallery__photo-item-icon"],"bi-play")})},e.id)})),c.length>u&&(0,i.jsxs)("div",{className:H()["reviews-gallery__photo-item"],onClick:function(){return d(7)},children:["photo"===c[u].type?(0,i.jsx)(L(),{lazy:!0,src:c[u].small,className:H()["reviews-gallery__photo"]}):c[u].thumbnail?(0,i.jsx)(L(),{lazy:!0,src:c[u].thumbnail,className:H()["reviews-gallery__photo"]}):(0,i.jsx)("i",{className:(0,n.Z)(H()["reviews-gallery__photo-item-icon"],"bi-play")}),(0,i.jsxs)("div",{className:H()["reviews-gallery__photo-item-overlay"],children:[l.totalPhotosCount-u,"+"]})]})]})})})},V=t(34537),q=t.n(V),K=t(88592),J=t(834),X=t.n(J),$=t(67557),ee=t.n($),re=function(e){var r,t=e.productId,s=e.userUnReviewedQueryProps,a=(0,m.b)().ua,o=a.isPc,l=a.isMobile,c=(0,j.useEmitter)().emitEvent,d=_sliced_to_array((0,f.useState)(!1),2),u=d[0],_=d[1],w=(0,K.M_)(["isLoggedIn","banStatus"]),p=w.isLoggedIn,h=w.banStatus,y=(0,Y.fw)({productId:t},{enabled:!s&&p}),b=function(){var e;c("show-add-or-edit-review-modal",{initialStars:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,onFinish:function(){return _(!0)},items:null===(e=y.data)||void 0===e?void 0:e.reviews})};return!u&&(null===(r=(s||y).data)||void 0===r?void 0:r.resultCount)?(0,i.jsx)("div",{className:(0,n.Z)(q()["unreviewed-form"],_define_property({},q()["unreviewed-form--full-height"],l)),children:(0,i.jsxs)("div",{className:q()["unreviewed-form__container"],children:[(0,i.jsx)(ee(),{variant:o?"body-lg":"body-sm",weights:"medium",tag:"p",className:q()["unreviewed-form__body"],children:"قبلا محصول رو خریدی. چند ستاره بهش می‌دی؟"}),(0,i.jsx)("div",{className:q()["unreviewed-form__rating"],onClick:function(){h.business&&c("open-ban-modal")},children:(0,i.jsx)(X(),{size:o?"lg":"md",onChange:b,readOnly:h.business})}),(0,i.jsx)("div",{className:q()["unreviewed-form__submit"],children:(0,i.jsx)(v(),{size:o?"xs":"xxs",variant:"outline",label:"ثبت تجربه خرید",onClick:function(){h.business?c("open-ban-modal"):b()}})})]})}):null},te=t(88107),ie=t(60802),se=t(80928),ae=t(93437),ne=t(57902),oe=(0,f.memo)((function(e){var r,t,s=e.sort,a=e.total,o=e.limit,d=e.product,u=e.isLoading,_=e.isShowMeta,v=e.reviewsData,p=e.onItemDelete,h=e.onShowAllReviews,b=(0,m.b)().ua,g=(0,te.Z)(),x=(0,K.M_)(["isLoggedIn"]).isLoggedIn,j=(0,f.useRef)(null==v||null===(r=v.reviews)||void 0===r?void 0:r.length),N=g.query.productId,k=((0,(0,ie.l)().getFeatureValue)("pdp_web_public")||{}).reviews_about_current_user,S=(0,Y.fw)({productId:N},{enabled:x});return(0,f.useEffect)((function(){var e,r;(null==v||null===(e=v.reviews)||void 0===e?void 0:e.length)&&(j.current=v.reviews.length!==o&&(null===(r=S.data)||void 0===r?void 0:r.resultCount)?v.reviews.length+1:v.reviews.length)}),[null==v||null===(t=v.reviews)||void 0===t?void 0:t.length,S.data]),(0,i.jsx)(c.Z,{fluid:b.isPc,title:"تجربه خرید‌ها",size:b.isPc?"lg":"sm",className:(0,n.Z)(l()["vertical-reviews"],_define_property({},l()["vertical-reviews--has-footer"],a>o)),children:(a>=0||u)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{id:"comments",className:l()["vertical-reviews__metadata"],children:[(0,i.jsx)("div",{onClick:h,className:l()["vertical-reviews__metadata-rating"],children:_&&(0,i.jsx)(ne.Z,{groups:v.groups,average:v.average,total:v.starsTotalCount})}),!!(null==v?void 0:v.hasReviewsWithPhoto)&&(0,i.jsx)("div",{className:l()["vertical-reviews__gallery"],children:(0,i.jsx)(B,{className:l()["vertical-reviews__gallery"]})})]}),(0,i.jsx)(T,{}),(0,i.jsx)("div",{className:l()["vertical-reviews__reviews"],children:u?(0,y.generateArray)(j.current).map((function(e){return(0,i.jsx)(ae.Z,{isShowAction:!0,isShowProductItem:!1,className:l()["vertical-reviews__review-card"]},e)})):(0,i.jsxs)(i.Fragment,{children:[!!k&&(0,i.jsx)(re,{productId:N,userUnReviewedQueryProps:S}),null==v?void 0:v.reviews.map((function(e,r){var t,s;return(!(null===(t=S.data)||void 0===t?void 0:t.resultCount)||(null===(s=S.data)||void 0===s?void 0:s.resultCount)&&r<=4)&&(0,i.jsx)(se.Z,{noBorder:!0,isShowAction:!0,review:e,product:d,isShowConversation:!0,className:l()["vertical-reviews__review-card"],onDelete:p},e.id)}))]})}),a>o&&(0,i.jsx)(w,{sort:s,onClick:h,numberOfReviews:a})]})})})),le=t(33918),ce=t(73156),de=t.n(ce),ue=(0,f.memo)((function(e){var r,t=e.sort,s=e.total,a=e.limit,o=e.product,l=e.isLoading,d=e.isShowMeta,u=e.reviewsData,_=e.onItemDelete,v=e.reviewsWithText,p=e.onShowAllReviews,h=(0,m.b)().ua.isMobile,f=(0,te.Z)(),b=(0,K.M_)(["isLoggedIn"]).isLoggedIn,g=((0,(0,ie.l)().getFeatureValue)("pdp_web_public")||{}).reviews_about_current_user,x=f.query.productId,j=(0,Y.fw)({productId:x},{enabled:b});return(0,i.jsx)("div",{className:de()["horizontal-reviews"],children:(0,i.jsxs)(c.Z,{title:"تجربه خرید‌ها",size:h?"sm":"lg",className:de()["horizontal-reviews__section"],children:[s>=0&&(0,i.jsxs)("div",{id:"comments",className:de()["horizontal-reviews__metadata"],children:[d&&(0,i.jsx)(ne.Z,{rateSize:"md",groups:u.groups,average:u.average,total:u.starsTotalCount}),(null==u?void 0:u.hasReviewsWithPhoto)&&(0,i.jsx)("div",{className:de()["horizontal-reviews__gallery"],children:(0,i.jsx)(B,{className:de()["horizontal-reviews__gallery"]})})]}),(0,i.jsx)(T,{}),l&&(0,i.jsx)("div",{className:(0,n.Z)(de()["horizontal-reviews__reviews"]),children:(0,i.jsx)("div",{className:de()["horizontal-reviews__slides"],children:(0,y.generateArray)(5).map((function(e){return(0,i.jsx)("div",{className:de()["horizontal-reviews__slides-item"],children:(0,i.jsx)(ae.Z,{isSlide:!0,isShowAction:!0,isShowProductItem:!1,className:de()["horizontal-reviews__slide-review-card"]})},e)}))})}),!l&&s>=0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:(0,n.Z)(de()["horizontal-reviews__reviews"]),children:(0,i.jsxs)("div",{className:de()["horizontal-reviews__slides"],children:[!!(null===(r=j.data)||void 0===r?void 0:r.resultCount)&&!!g&&(0,i.jsx)("div",{className:de()["horizontal-reviews__slides-item"],children:(0,i.jsx)(re,{productId:x,userUnReviewedQueryProps:j})}),v.map((function(e,r){var t,s;return(!(null===(t=j.data)||void 0===t?void 0:t.resultCount)||(null===(s=j.data)||void 0===s?void 0:s.resultCount)&&r<=4)&&(0,i.jsx)("div",{className:de()["horizontal-reviews__slides-item"],children:(0,i.jsx)(se.Z,{noBorder:!0,isShowAction:!0,review:e,product:o,isShowConversation:!0,className:de()["horizontal-reviews__slide-review-card"],onDelete:_,onClick:function(e){return function(e){var r,t=function(r){var t;return null==e||null===(t=e.target)||void 0===t?void 0:t.closest(r)};t("a")||t("button")||t(".bs-modal")||t(".ignore-review-click")||(null==e||null===(r=e.preventDefault)||void 0===r||r.call(e),null==p||p())}(e)}},e.id)},"r-".concat(e.id,"-").concat(r))})),s>0&&(0,i.jsx)("div",{className:de()["horizontal-reviews__slides-item"],children:(0,i.jsx)("div",{onClick:p,className:de()["horizontal-reviews__see-all-slide"],children:(0,i.jsx)("span",{children:"مشاهده تجربه خریدها (".concat(s,")")})})})]})}),s>a&&(0,i.jsx)(w,{isInline:!0,numberOfReviews:s,sort:t,total:s,onClick:p,reviewsWithText:v,className:de()["horizontal-reviews__footer"]})]})]})})})),_e=t(20701),ve=t(11834),me=t(43150),we=(0,f.memo)((function(e){var r,t,s,n=e.setIsAllReviewsModalOpen,o=e.setScrollItemTo,l=(0,m.b)().ua,c=(0,te.Z)(),d=(0,Q.G)().product,u=(0,ie.l)().getFeatureValue,_=c.query||{},v=_.vendorIdentifier,w=_.productId,p=u("pdp_web_public")||{},h=_sliced_to_array((0,f.useState)(le.kv.HAS_DESCRIPTION),2),y=h[0],b=h[1],g=(0,me.$)({productId:w,limit:6,vendorIdentifier:v,shouldGetLikes:p.reviews}),x=(null===(r=g.data)||void 0===r?void 0:r.totalCount)||0,j=(0,f.useMemo)((function(){return(0,_e.s)(g.data,d)}),[g.data,d]),N=g.isLoading||g.isFetching,k=p.reviews&&x>0,S=(0,f.useMemo)((function(){var e,r;return((null===(r=g.data)||void 0===r||null===(e=r.reviews)||void 0===e?void 0:e.slice())||[]).slice(0,10)}),[g.data]),C=(0,f.useCallback)((function(){return n(!0)}),[]),I=(0,f.useCallback)((function(){return g.refetch()}),[]),z=(0,f.useCallback)((function(e){return b(e)}),[]),P=((null==j||null===(t=j.reviews)||void 0===t?void 0:t.length)||0)>0,O=(null==j||null===(s=j.vendorReviewsGroup)||void 0===s?void 0:s.starsTotalCount)||0;return(!!P||!!O)&&(!P&&O?(0,i.jsx)(a(),{mt:l.isPc?40:24,children:(0,i.jsx)(ve.Z,{vendorReviewsGroup:j.vendorReviewsGroup})}):l.isPc?(0,i.jsx)(oe,{setScrollItemTo:o,sort:y,total:x,limit:6,product:d,isLoading:N,isShowMeta:k,reviewsData:j,onSortChange:z,onItemDelete:I,onShowAllReviews:C}):(0,i.jsx)(ue,{setScrollItemTo:o,sort:y,limit:6,total:x,product:d,isLoading:N,isShowMeta:k,reviewsData:j,reviewsWithText:S,onItemDelete:I,onShowAllReviews:C}))})),pe=t(84581),he=t(68707),fe=t(17771),ye=function(){var e=(0,te.Z)(),r=(0,Q.G)().product,t=(0,j.useEmitter)(),s=t.subEvent,a=t.offEvent,n=e.query.productId,o=_sliced_to_array((0,f.useState)(null),2),l=o[0],c=o[1],d=_sliced_to_array((0,f.useState)(!1),2),u=d[0],_=d[1],v=(0,f.useRef)(null),m=(0,f.useRef)(null),w=(0,f.useCallback)((function(){setTimeout((function(){return _(!1)}),0)}),[]),p=_sliced_to_array((0,j.useDisclosure)(!1),2),h=p[0],b=p[1],g=b.open,x=b.close,N=(0,f.useCallback)((function(e){c(e),g()}),[c,g]),k=(0,f.useCallback)(_async_to_generator((function(){var r;return _ts_generator(this,(function(t){switch(t.label){case 0:return r=e.asPath.match(/#review-(\d+)/),(null==r?void 0:r.length)>0?((0,y.removeWindowUrlHash)(),[4,(0,y.sleep)(500)]):[3,2];case 1:t.sent(),N(r[1]),t.label=2;case 2:return[2]}}))})),[e]);return(0,f.useEffect)((function(){k()}),[k]),(0,f.useEffect)((function(){var e=new IntersectionObserver((function(e){var t=_sliced_to_array(e,1)[0];t.isIntersecting&&!v.current?v.current=setTimeout((function(){var e;(0,pe.s)("readReviews",{productId:Number(n),productRate:null==r?void 0:r.rating,vendorId:null==r||null===(e=r.vendor)||void 0===e?void 0:e.id,productReviewCount:null==r?void 0:r.reviewCount})}),5e3):t.isIntersecting||(clearTimeout(v.current),v.current=null)}));return e.observe(m.current),s("show-single-review-modal",N,{autoOff:!1}),function(){e.disconnect(),clearTimeout(v.current),a("show-single-review-modal",N)}}),[]),(0,i.jsxs)("div",{id:"pdp-reviews",ref:m,children:[(0,i.jsx)(we,{setIsAllReviewsModalOpen:_}),(0,i.jsx)(he.Z,{product:r,entityId:n,entityType:"product",isShowProductItem:!1,isOpen:u,onClose:w}),(0,i.jsx)(fe.Z,{reviewId:l,isOpen:h,onClose:x})]})}},93437:function(e,r,t){"use strict";var i=t(32930),s=t(40877),a=t(89150),n=t.n(a),o=t(45835),l=t(834),c=t.n(l),d=t(70437),u=t.n(d);r.Z=function(e){var r,t=e.isSlide,a=e.isModal,l=e.noBorder,d=e.isShowAction,_=e.className,v=void 0===_?"":_,m=(e.isShowUser,e.isShowProductItem),w=(0,o.b)().ua.isPc,p=(0,s.Z)(v,n()["review-card"],(_define_property(r={},n()["review-card--is-pc"],w),_define_property(r,n()["review-card--is-modal"],a),_define_property(r,n()["review-card--is-slide"],t),_define_property(r,n()["review-card--no-border"],l),_define_property(r,n()["review-card--has-product"],m),r));return(0,i.jsxs)("div",{className:p,children:[m&&(0,i.jsx)("div",{className:n()["review-card__product"],children:(0,i.jsx)(u(),{width:"100%",height:74})}),(0,i.jsxs)("div",{className:n()["review-card__info"],children:[(0,i.jsx)("div",{className:n()["review-card__avatar"],children:(0,i.jsx)(u(),{width:44,height:44,radius:44})}),(0,i.jsxs)("div",{className:n()["review-card__user"],children:[(0,i.jsx)(u(),{width:140,height:20}),(0,i.jsx)(c(),{readOnly:!0,value:0,size:w?"md":"sm"})]}),(0,i.jsx)("div",{className:n()["review-card__date"],children:(0,i.jsx)(u(),{width:60,height:16})})]}),(0,i.jsx)("div",{className:n()["review-card__body"],children:(0,i.jsx)(u(),{width:"40%",height:20})}),d&&(0,i.jsxs)("div",{className:n()["review-card__actions"],children:[(0,i.jsx)(u(),{width:100,height:w?36:32}),(0,i.jsx)(u(),{width:100,height:w?36:32})]})]})}},73156:function(e){e.exports={"horizontal-reviews__gallery":"qGwa0E","horizontal-reviews__review-card":"Ojfmy8","horizontal-reviews__metadata":"NGPwEb","horizontal-reviews__see-all-slide":"Z_dijP","horizontal-reviews__slide-review-card":"WPr1kb","horizontal-reviews__reviews":"a0nPy5","horizontal-reviews__slides":"DK4H_8","horizontal-reviews__slides-item":"Y4nx26","horizontal-reviews__no-item":"dD3wFK"}},90725:function(e){e.exports={aspects__icon:"yZCtsm",aspects__list:"cG979a",aspects__label:"HVY7Bc","aspects__label--selected":"tBQjgc",aspects__content:"qGsjP_",aspects__review:"Y9kWwX",aspects__button:"tDCDR2",aspects__description:"hCCMyR"}},73867:function(e){e.exports={feedback:"kXyCTm",feedback__like:"QORppP",feedback__dislike:"nMNDV4",feedback__modal:"vJbgH3","feedback__modal-reasons":"mCiKY3","feedback__modal-reason":"_16NDyY","feedback__modal-reason--selected":"_3VbgRF","feedback__modal-input":"xjRsP7"}},3744:function(e){e.exports={"review-summary":"sY9CVY","review-summary__icon":"gs6Llm","review-summary__title":"tDz1Wt","review-summary__subtitle":"E_2IOM","review-summary__box":"_9Psfzc","review-summary__button":"VlsCVu","review-summary__aspects-title":"kLp6XK","review-summary__aspects":"dbH3ll","review-summary__aspect":"J3NLOJ"}},99173:function(e){e.exports={"reviews-footer":"I63B8n","reviews-footer__see-all":"ePNyzR","reviews-footer--inline":"Dth8id"}},14845:function(e){e.exports={"reviews-gallery__header":"geXRbr","reviews-gallery__header-title":"IeohVc","reviews-gallery__photos":"_3lGrgA","reviews-gallery__photos-wrapper":"_0DLSAp","reviews-gallery__photo-item":"HJytNa","reviews-gallery__photo":"wWs3A_","reviews-gallery__photo-item-icon":"DwZe35","reviews-gallery__photo-item-overlay":"gy07si"}},34537:function(e){e.exports={"unreviewed-form":"vCozgg","unreviewed-form--full-height":"gGa6gW","unreviewed-form__container":"eove06","unreviewed-form__rating":"tGK_Xf","unreviewed-form__body":"_513tPe"}},16239:function(e){e.exports={"vertical-reviews__sort":"ADePQO","vertical-reviews__divider":"e0_7eG","vertical-reviews__review-card":"MJ3_KD","vertical-reviews__no-item":"qBrlMT","vertical-reviews__metadata":"LvQLkd","vertical-reviews__metadata-rating":"HyOYRn","vertical-reviews__reviews":"RsmRPU"}},89150:function(e){e.exports={"review-card":"FbYpLC","review-card__context":"tQ6Gjj","review-card__body--is-slide":"myofJ1","review-card__product":"_3NC6Ae","review-card__variation":"r3Z_yQ","review-card__context-description":"yYMH4f","review-card__context-description-txt":"LTULsH","review-card__context-description-txt--is-edited":"_6vX_Di","review-card__context-description-txt--is-edited-title":"HpDfFO","review-card__context-attachments":"mCoUrH","review-card__body-btn":"DfWv3l","review-card__tags":"ijzZNs","review-card__tag":"Mm641r","review-card__reply":"JUdnQe","review-card--is-slide":"_Fizzh","review-card__body":"jef2aO","review-card--many-tags":"twxd0S","review-card--has-body":"Q98WC5","review-card__image":"MrjwZc","review-card--is-pc":"No1_U_","review-card--no-border":"IbSQER","review-card--is-modal":"Xjhvuf","review-card__info":"_1ohgsq","review-card__avatar":"bRt05w","review-card__user":"e9jqrH","review-card__date":"_1mHH5x","review-card__actions":"YKOHCv"}}}]);